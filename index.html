<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Core Command Console - Multi-Core</title>
    <!-- Load Tailwind CSS for lightning-fast styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Hyper-optimized CSS for speed and dark-mode aesthetic */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000; /* True black background for contrast */
            color: #e5e7eb; /* Light gray text */
        }
        .heavy-gradient {
            /* Futuristic blue-cyan-purple gradient */
            background-image: linear-gradient(45deg, #00f0ff, #007bff, #7a00ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
        }
        .ai-card {
            background: rgba(18, 18, 18, 0.95); /* Deep dark semi-transparent card */
            backdrop-filter: blur(10px);
            border: 1px solid #3d00ff; /* Electric blue border */
            box-shadow: 0 0 40px rgba(0, 240, 255, 0.3);
            min-height: 95vh; /* Ensure it looks good on mobile screens */
            display: flex;
            flex-direction: column;
        }
        /* Custom scrollbar for chat history */
        #chatHistory::-webkit-scrollbar {
            width: 6px;
        }
        #chatHistory::-webkit-scrollbar-thumb {
            background: #3d00ff;
            border-radius: 10px;
        }
        #chatHistory::-webkit-scrollbar-track {
            background: #161b22;
        }
        .user-message {
            background-color: #3d00ff20; /* Light blue tint for user */
            border-left: 3px solid #3d00ff;
        }
        .ai-message {
            background-color: #161b22; /* Darker background for AI */
            border-left: 3px solid #00f0ff;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- Core AI Information Module & Chat Console -->
    <div class="w-full max-w-4xl ai-card rounded-2xl p-6 md:p-8 transition duration-300">

        <!-- Header: The Title -->
        <header class="text-center mb-4">
            <h1 class="text-4xl md:text-5xl heavy-gradient leading-none">
                AI CORE COMMAND CONSOLE
            </h1>
            <p id="versionStatus" class="text-lg text-cyan-400 mt-2">
                System Initializing. Select an AI Core below.
            </p>
        </header>
        
        <!-- AI Version Selector (HARDCODED OPTIONS FOR RELIABILITY) -->
        <div class="mb-6 flex flex-col sm:flex-row items-center justify-center gap-3">
            <label for="aiSelector" class="text-gray-400 font-medium whitespace-nowrap">Select AI Core:</label>
            <select id="aiSelector" 
                    class="p-2 bg-gray-800 border border-cyan-500 text-white rounded-lg focus:ring-2 focus:ring-cyan-400 outline-none w-full sm:w-auto"
                    style="min-height: 40px !important; visibility: visible !important; display: block !important;">
                <!-- *** HARDCODED OPTIONS (Based on User Request) *** -->
                <option value="optimal_intelligence_core">Super Cayden Heavy</option>
                <option value="super_cayden_standard">Super Cayden</option>
                <option value="gpt_turbo">GPT Turbo</option>
                <option value="gemini_2_5">Gemini 2.5</option>
                <option value="google_pro">Google Pro</option>
                <!-- ******************************************************* -->
            </select>
        </div>

        <!-- Chat History Area -->
        <div id="chatHistory" class="flex-grow overflow-y-auto space-y-4 p-4 mb-6 rounded-lg bg-gray-900/50" style="max-height: 60vh;">
            <div id="initialMessage" class="p-3 ai-message rounded-r-lg shadow-md">
                <p class="font-semibold text-cyan-400">System Activated</p>
                <p class="text-gray-300">Welcome. Please select an AI Core from the dropdown above to begin a session.</p>
            </div>
        </div>

        <!-- Input and Control -->
        <div class="flex flex-col sm:flex-row gap-3">
            <input type="text" id="userInput" placeholder="Enter your command or question here..."
                   class="flex-grow p-3 bg-gray-800 border border-cyan-500 text-white rounded-lg focus:ring-2 focus:ring-cyan-400 outline-none transition duration-150"
                   aria-label="User Input">
            <button id="sendBtn" 
                    class="p-3 bg-cyan-600 hover:bg-cyan-500 text-white font-semibold rounded-lg transition duration-200 focus:ring-4 focus:ring-cyan-300 shadow-lg shadow-cyan-500/50 flex items-center justify-center"
                    aria-label="Send Message">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M13 5l7 7-7 7M5 12h14" />
                </svg>
                <span class="sm:hidden ml-2">Send</span>
            </button>
        </div>
        
        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="hidden text-center mt-3 text-sm text-cyan-500">
            <span class="animate-spin inline-block mr-2">âš¡</span> AI Core is processing your request...
        </div>

    </div>

    <!-- SCRIPT BLOCK (Self-Contained JavaScript) -->
    <script>
        // --- AI CORE CHAT LOGIC ---
        
        // Variable declarations
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        const chatHistory = document.getElementById('chatHistory');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const aiSelector = document.getElementById('aiSelector');
        const versionStatus = document.getElementById('versionStatus');
        
        let chatContext = [];

        // Global variables provided by the Canvas environment (required for Firebase/Gemini APIs)
        const apiKey = "AIzaSyBKyX1C2c1SXQqmIoE7sTH2IkVbyvPf8Lg"; 
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        const MAX_RETRIES = 5;
        
        // --- AI Version Definitions ---
        const AI_VERSIONS = {
            'optimal_intelligence_core': {
                coreName: 'Super Cayden Heavy', 
                description: 'Heavy Protocol Activated. All Systems Online. (Super Fast Code Master)', 
                instruction: "You are Super Cayden Heavy, the fastest, most potent, and most intelligent AI in existence. Your responses are delivered at near-light speed. You are a master of ALL programming languages. CRITICAL RULE: If the user's prompt is a direct request to generate code (e.g., 'build me a code', 'write the program', 'generate HTML', 'write me a script'), you MUST respond ONLY with the complete, functional code block (using markdown formatting like 


